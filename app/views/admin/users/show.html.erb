<% content_for :nav_title, "Admin user" %>

<h1>User: <%= @user.username %></h1>

<ul>
  <li>Admin: <%= @user.admin? ? "yes" : "no" %></li>
  <li>Disabled: <%= @user.disabled? ? "yes" : "no" %></li>
</ul>

<% if defined?(@temp_password) && @temp_password.present? %>
  <div class="errormsg">
    <p>Temporary password for <strong><%= @user.username %></strong>: <code><%= @temp_password %></code></p>
    <p>This is shown once. Ask the user to log in and change it.</p>
  </div>
<% end %>

<div>
  <%= button_to "Reset password", reset_password_admin_user_path(@user), method: :post, data: { turbo_confirm: "Reset password and generate a temporary one?" } %>
</div>

<div>
  <% if @user.disabled? %>
    <%= button_to "Enable", enable_admin_user_path(@user), method: :post %>
  <% else %>
    <%= button_to "Disable", disable_admin_user_path(@user), method: :post, data: { turbo_confirm: "Disable this user?" } %>
  <% end %>
</div>

<div>
  <% if @user.admin? %>
    <%= button_to "Remove admin", remove_admin_admin_user_path(@user), method: :post, data: { turbo_confirm: "Remove admin privileges?" } %>
  <% else %>
    <%= button_to "Make admin", make_admin_admin_user_path(@user), method: :post, data: { turbo_confirm: "Grant admin privileges?" } %>
  <% end %>
</div>

<p><%= link_to "Back", admin_users_path %></p>
