<% content_for :nav_title, "Invite keys" %>

<h1>Invite keys</h1>

<p><%= link_to "New invite key", new_admin_signup_token_path %></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Uses</th>
      <th>Expires</th>
      <th>Revoked</th>
      <th>Created</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @tokens.each do |t| %>
      <tr>
        <td><%= t.label.presence || "-" %></td>
        <td><%= t.uses_count %>/<%= t.max_uses %></td>
        <td><%= t.expires_at ? t.expires_at.strftime("%Y-%m-%d") : "-" %></td>
        <td><%= t.revoked_at ? "yes" : "no" %></td>
        <td><%= t.created_at.strftime("%Y-%m-%d") %></td>
        <td>
          <% if t.revoked_at.nil? %>
            <%= button_to "Revoke", revoke_admin_signup_token_path(t), method: :post, data: { turbo_confirm: "Revoke this invite key?" } %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
